SELECT
        FACTORY_ID,
        SHOP,
        BRAND,
        SORT,
        STOCK_ID,
        STOCK_NAME,
        NORM_NAME,
        AVG(AVERAGE_PRICE) AS a_price,
        AVG(RETAIL_PRICE) AS r_price,
        AVG(DISCOUNT) AS avg_discount,
        SUM(SHIP_TOTAL) AS s_total,
        SUM(RETURN_TOTAL) AS r_total,
        SUM(ACTUAL_SALES) AS a_sales,
        SUM(ACTUAL_PRICE) AS a_prlce
        FROM
        sales_report
        GROUP BY
        STOCK_ID
        ORDER BY
        a_prlce DESC
		
		
		
筛选条件一、（现有库存+在途库存）/7日销售库存<9。筛选条件二。销量排名前100名。筛选条件三、前一百名货品号补齐8周库存  2016年9月17日14:18:02


SELECT * FROM stockstatus WHERE ((STOCK_AMOUNT+PURCHASE_TRANSIT)/7)<9  ORDER BY MONTH_SALES DESC LIMIT 0,100;


//修改 a字段拷贝到b字段

update distribution_fabric a,distribution_fabric b set a.ADDITION_TIME=b.ADD_TIME where a.ID=b.ID


//报表sql
DELETE FROM build_Progress_Report;/*删除原有的数据*/

/*添加数据到报表查询显示*/

/*发版时间*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT RELEASE_TIME,COUNT(RELEASE_TIME),SUM(ORDERS),'发版时间' FROM build_progress
WHERE RELEASE_TIME != '' AND STATE ='1' GROUP BY RELEASE_TIME;
/*面料入仓*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT FABRIC_STORAGE_TIME,COUNT(FABRIC_STORAGE_TIME),SUM(ORDERS),'面料入仓' FROM build_progress
WHERE FABRIC_STORAGE_TIME != '' AND STATE ='1'  GROUP BY FABRIC_STORAGE_TIME;

/*面料发放*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT FABRIC_RELEASE_TIME,COUNT(FABRIC_RELEASE_TIME),SUM(ORDERS),'面料发放' FROM build_progress
WHERE FABRIC_RELEASE_TIME != '' AND STATE ='1'  GROUP BY FABRIC_RELEASE_TIME;

/*匹印领料*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT LARGE_CARGO_TIME,COUNT(LARGE_CARGO_TIME),SUM(ORDERS),'匹印领料' FROM build_progress
WHERE LARGE_CARGO_TIME != '' AND STATE ='1'  GROUP BY LARGE_CARGO_TIME;

/*匹印回料*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT LARGE_CARGO_COMPLETION_TIME,COUNT(LARGE_CARGO_COMPLETION_TIME),SUM(ORDERS),'匹印回料' FROM build_progress
WHERE LARGE_CARGO_COMPLETION_TIME != '' AND STATE ='1'  GROUP BY LARGE_CARGO_COMPLETION_TIME;

/*裁剪数*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT CROP_COMPLETION_TIME,COUNT(CROP_NUMBER),SUM(ORDERS),'裁剪数' FROM build_progress
WHERE CROP_NUMBER != '' AND STATE ='1'  GROUP BY CROP_NUMBER;

/*片印领料*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT CUT_LARGE_RECEIVE_TIME,COUNT(CUT_LARGE_RECEIVE_TIME),SUM(ORDERS),'片印领料' FROM build_progress
WHERE CUT_LARGE_RECEIVE_TIME != '' AND STATE ='1'  GROUP BY CUT_LARGE_RECEIVE_TIME;

/*片印回料*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT CUT_LARGE_RETURN_TIME,COUNT(CUT_LARGE_RETURN_TIME),SUM(ORDERS),'片印回料' FROM build_progress
WHERE CUT_LARGE_RETURN_TIME != '' AND STATE ='1'  GROUP BY CUT_LARGE_RETURN_TIME;

/*车缝领料*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT FACTORY_PICKING_TIME,COUNT(FACTORY_PICKING_TIME),SUM(ORDERS),'车缝领料' FROM build_progress
WHERE FACTORY_PICKING_TIME != '' AND STATE ='1'  GROUP BY FACTORY_PICKING_TIME;

/*成品入库*/
INSERT INTO build_Progress_Report (STATISTICS_DATE,TOTAL,NUMBER,NAME_TYPE) 
SELECT STORAGE_TIME,COUNT(STORAGE_TIME),SUM(ORDERS),'成品入库' FROM build_progress
WHERE STORAGE_TIME != '' AND STATE ='1'  GROUP BY STORAGE_TIME;



INSERT INTO build_Progress_Report (
	STATISTICS_DATE,
	TlOTAL,
	NUMBER,
	NAME_TYPE
)
SELECT
	RELEASE_TIME,
	
	RELEASE_TIME,
	ORDERS,'发版时间'
FROM
	build_progress
WHERE
	RELEASE_TIME != ''
GROUP BY
	RELEASE_TIME



SELECT
	STORAGE_TIME,
	'产品入库',
	STORAGE_TIME,
	ORDERS

FROM
	build_progress
WHERE
	STORAGE_TIME != ''
GROUP BY
	STORAGE_TIME

/*时间*/


SELECT
	/*发版时间*/
 RELEASE_TIME,COUNT(RELEASE_TIME),SUM(ORDERS),'发版时间',
/*面料入仓*/
 FABRIC_STORAGE_TIME,COUNT(FABRIC_STORAGE_TIME),SUM(ORDERS),'面料入仓',
/*面料发放*/
 FABRIC_RELEASE_TIME,COUNT(FABRIC_RELEASE_TIME),SUM(ORDERS),'面料发放' ,
/*匹印领料*/
 LARGE_CARGO_TIME,COUNT(LARGE_CARGO_TIME),SUM(ORDERS),'匹印领料',
/*匹印回料*/
 LARGE_CARGO_COMPLETION_TIME,COUNT(LARGE_CARGO_COMPLETION_TIME),SUM(ORDERS),'匹印回料',
/*裁剪数*/
 CROP_COMPLETION_TIME,COUNT(CROP_NUMBER),SUM(ORDERS),'裁剪数' ,
/*片印领料*/
 CUT_LARGE_RECEIVE_TIME,COUNT(CUT_LARGE_RECEIVE_TIME),SUM(ORDERS),'片印领料' ,
/*片印回料*/
 CUT_LARGE_RETURN_TIME,COUNT(CUT_LARGE_RETURN_TIME),SUM(ORDERS),'片印回料' ,
/*车缝领料*/
 FACTORY_PICKING_TIME,COUNT(FACTORY_PICKING_TIME),SUM(ORDERS),'车缝领料',
/*成品入库*/
 STORAGE_TIME,COUNT(STORAGE_TIME),SUM(ORDERS),'成品入库' 
FROM
	build_progress
WHERE
	(
		RELEASE_TIME != ''
		OR FABRIC_STORAGE_TIME != ''
	)
GROUP BY
	/*发版时间*/
 RELEASE_TIME,
/*面料入仓*/
 FABRIC_STORAGE_TIME,
/*面料发放*/
 FABRIC_RELEASE_TIME,
/*匹印领料*/
 LARGE_CARGO_TIME,
/*匹印回料*/
 LARGE_CARGO_COMPLETION_TIME,
/*裁剪数*/
 CROP_COMPLETION_TIME,
/*片印领料*/
 CUT_LARGE_RECEIVE_TIME,
/*片印回料*/
 CUT_LARGE_RETURN_TIME,
/*车缝领料*/
 FACTORY_PICKING_TIME,
/*成品入库*/
 STORAGE_TIME